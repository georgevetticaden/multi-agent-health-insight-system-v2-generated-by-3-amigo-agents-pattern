<!DOCTYPE html>
<html>
<head>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(to bottom right, #0f172a, #1e3a8a, #581c87);
      min-height: 100vh;
      color: #e5e7eb;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    .container {
      padding: 32px;
    }
    h1, h2, h3, h4 {
      color: white;
      margin: 0 0 16px 0;
    }
    a {
      color: #60a5fa;
      text-decoration: none;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      color: #e5e7eb;
    }
    th {
      text-align: left;
      padding: 12px;
    }
    td {
      padding: 12px;
    }
    
    /* Collapsible sections */
    .collapsible {
      cursor: pointer;
      user-select: none;
      transition: all 0.3s ease;
    }
    .collapsible:hover {
      background: rgba(255,255,255,0.08);
    }
    .collapsible-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px;
    }
    .collapsible-arrow {
      transition: transform 0.3s ease;
      font-size: 1.2rem;
    }
    .collapsible-arrow.open {
      transform: rotate(180deg);
    }
    .collapsible-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }
    .collapsible-content.open {
      max-height: 3000px;
    }
    
    /* Failure analysis styling */
    .failure-card {
      background: linear-gradient(135deg, rgba(239,68,68,0.15), rgba(239,68,68,0.05));
      border: 2px solid rgba(239,68,68,0.3);
      border-radius: 16px;
      padding: 24px;
      margin-top: 24px;
      position: relative;
      overflow: hidden;
    }
    .failure-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #ef4444, #dc2626, #ef4444);
      animation: pulse 2s ease-in-out infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 0.8; }
      50% { opacity: 1; }
    }
    .failure-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
    }
    .failure-icon {
      background: linear-gradient(135deg, #ef4444, #dc2626);
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      box-shadow: 0 4px 12px rgba(239,68,68,0.3);
    }
    .failure-item {
      background: rgba(0,0,0,0.2);
      border-left: 4px solid #ef4444;
      padding: 16px;
      margin-bottom: 12px;
      border-radius: 8px;
    }
    .recommendation-box {
      background: rgba(59,130,246,0.1);
      border: 1px solid rgba(59,130,246,0.3);
      border-radius: 12px;
      padding: 16px;
      margin-top: 16px;
    }
  </style>
</head>
<body>
<div class="container">

<h1 style="font-size: 48px; margin-bottom: 16px;">üìä CMO Agent Evaluation Report</h1>

<div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); padding: 24px; border-radius: 16px; margin-bottom: 24px; border: 1px solid rgba(255,255,255,0.1);">
  <div style="font-size: 1.125rem; font-weight: 600; color: #60a5fa;">Test Suite: Real World</div>
  <div style="font-size: 0.875rem; color: #e5e7eb; font-style: italic; margin-top: 4px;">Production-grade test cases derived from actual user queries and clinical scenarios</div>
</div>

<div style="color: #e5e7eb; margin-bottom: 24px;">
The Real World test suite evaluates the CMO Agent's performance on queries taken from production usage, representing the complexity and nuance of actual medical questions. These tests validate the agent's ability to handle real clinical scenarios with appropriate medical reasoning, specialist selection, and comprehensive analysis.
</div>

<div style="display: flex; gap: 16px; margin: 20px 0;">
  <div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); padding: 8px 16px; border-radius: 8px; font-size: 0.875rem; border: 1px solid rgba(255,255,255,0.1); color: white;">
    <strong style="color: #60a5fa;">Date:</strong> 2025-06-28T04:21:27
  </div>
  <div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); padding: 8px 16px; border-radius: 8px; font-size: 0.875rem; border: 1px solid rgba(255,255,255,0.1); color: white;">
    <strong style="color: #60a5fa;">Evaluation Type:</strong> Hybrid (Deterministic + LLM Judge)
  </div>
</div>

<hr style="border: 0; height: 1px; background: rgba(255,255,255,0.1); margin: 32px 0;">

<h2 style="color: white; display: flex; align-items: center; gap: 12px;">
  <span style="background: rgba(59,130,246,0.2); width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">üéØ</span>
  Executive Summary
</h2>

<div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); border-radius: 16px; padding: 24px; margin-bottom: 24px; border: 1px solid rgba(255,255,255,0.1);">
  <h3 style="display: flex; align-items: center; gap: 8px; margin: 0 0 16px 0; color: white;">
    <span style="font-size: 1.5rem;">üî¥</span>
    CMO Agent Test Suite: <span style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.875rem; margin-left: 8px;">FAILED</span>
  </h3>
  
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-top: 20px;">
    <div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); padding: 16px; border-radius: 12px; text-align: center; border: 1px solid rgba(255,255,255,0.1);">
      <div style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 4px;">Overall Score</div>
      <div style="font-size: 2rem; font-weight: 700; color: white;">88.9%</div>
    </div>
    <div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); padding: 16px; border-radius: 12px; text-align: center; border: 1px solid rgba(255,255,255,0.1);">
      <div style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 4px;">Test Cases Evaluated</div>
      <div style="font-size: 2rem; font-weight: 700; color: white;">4</div>
    </div>
  </div>
  
  <div style="background: rgba(239,68,68,0.1); padding: 16px; border-radius: 8px; margin-top: 16px; border: 1px solid rgba(239,68,68,0.3);">
    <strong style="color: #fca5a5;">Failure Reason:</strong> <span style="color: #e5e7eb;">One or more evaluation dimensions did not meet their minimum threshold requirements.</span>
    <div style="font-size: 0.875rem; color: #cbd5e1; margin-top: 4px; font-style: italic;">
      Each test case is evaluated on 5 dimensions. The test suite fails if ANY dimension's average score across all tests falls below its target threshold.
    </div>
  </div>
  
  <div style="margin-top: 16px; color: white;">
    <strong style="color: #fca5a5;">Failed Dimensions:</strong> 2 of 5
    <ul style="margin-top: 8px; color: #fca5a5;">
      <li>Complexity Classification</li>
      <li>Analysis Quality</li>
    </ul>
  </div>
</div>

<h3 style="color: white;">Test Case Summary</h3>
<div style="font-size: 0.875rem; color: #94a3b8; font-style: italic; margin-bottom: 12px;">Individual test results with dimension failures</div>

<div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); margin-bottom: 24px; border: 1px solid rgba(255,255,255,0.1);">
  <table style="width: 100%; border-collapse: collapse; color: white;">
    <thead>
      <tr style="background: linear-gradient(135deg, #3b82f6, #06b6d4);">
        <th style="color: white; padding: 12px 16px; text-align: left;">Test Case</th>
        <th style="color: white; padding: 12px 16px; text-align: left;">Status</th>
        <th style="color: white; padding: 12px 16px; text-align: left;">Failed Dimensions</th>
        <th style="color: white; padding: 12px 16px; text-align: left;">Complexity</th>
      </tr>
    </thead>
    <tbody>
      <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
        <td style="padding: 12px 16px; color: #e5e7eb;">standard_001</td>
        <td style="padding: 12px 16px;"><span style="background: rgba(239,68,68,0.2); color: #fca5a5; padding: 4px 8px; border-radius: 4px; font-size: 0.875rem;">‚ùå FAIL</span></td>
        <td style="padding: 12px 16px; color: #e5e7eb;">Complexity</td>
        <td style="padding: 12px 16px;"><span style="background: rgba(59,130,246,0.2); color: #93bbfc; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem;">STANDARD</span></td>
      </tr>
      <tr style="background: rgba(255,255,255,0.02); border-bottom: 1px solid rgba(255,255,255,0.1);">
        <td style="padding: 12px 16px; color: #e5e7eb;">standard_002</td>
        <td style="padding: 12px 16px;"><span style="background: rgba(239,68,68,0.2); color: #fca5a5; padding: 4px 8px; border-radius: 4px; font-size: 0.875rem;">‚ùå FAIL</span></td>
        <td style="padding: 12px 16px; color: #e5e7eb;">Quality</td>
        <td style="padding: 12px 16px;"><span style="background: rgba(59,130,246,0.2); color: #93bbfc; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem;">STANDARD</span></td>
      </tr>
      <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
        <td style="padding: 12px 16px; color: #e5e7eb;">complex_001</td>
        <td style="padding: 12px 16px;"><span style="background: rgba(239,68,68,0.2); color: #fca5a5; padding: 4px 8px; border-radius: 4px; font-size: 0.875rem;">‚ùå FAIL</span></td>
        <td style="padding: 12px 16px; color: #e5e7eb;">Quality</td>
        <td style="padding: 12px 16px;"><span style="background: rgba(168,85,247,0.2); color: #d8b4fe; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem;">COMPLEX</span></td>
      </tr>
      <tr style="background: rgba(255,255,255,0.02);">
        <td style="padding: 12px 16px; color: #e5e7eb;">complex_002</td>
        <td style="padding: 12px 16px;"><span style="background: rgba(239,68,68,0.2); color: #fca5a5; padding: 4px 8px; border-radius: 4px; font-size: 0.875rem;">‚ùå FAIL</span></td>
        <td style="padding: 12px 16px; color: #e5e7eb;">Quality</td>
        <td style="padding: 12px 16px;"><span style="background: rgba(168,85,247,0.2); color: #d8b4fe; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem;">COMPLEX</span></td>
      </tr>
      <tr style="background: linear-gradient(135deg, rgba(59,130,246,0.2), rgba(168,85,247,0.2)); font-weight: 600;">
        <td style="padding: 12px 16px; color: white;">TOTAL</td>
        <td style="padding: 12px 16px; color: white;">0/4 Passed</td>
        <td style="padding: 12px 16px; color: white;">4 tests with failures</td>
        <td style="padding: 12px 16px; color: white;">-</td>
      </tr>
    </tbody>
  </table>
</div>

<h3 style="color: white;">Dimension Performance Across All Tests</h3>
<div style="font-size: 0.875rem; color: #94a3b8; font-style: italic; margin-bottom: 12px;">Average scores across all test cases for each evaluation dimension</div>

<div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); border-radius: 12px; padding: 24px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); margin-bottom: 24px; border: 1px solid rgba(255,255,255,0.1);">
  
  <div style="margin-bottom: 20px;">
    <div style="font-weight: 600; color: #e5e7eb; margin-bottom: 4px;">Complexity Classification</div>
    <div style="display: flex; justify-content: space-between; margin: 8px 0;">
      <span style="color: #cbd5e1;">Score: <strong style="color: #ef4444;">75.0%</strong></span>
      <span style="color: #cbd5e1;">Target: 90.0%</span>
    </div>
    <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px; overflow: hidden; position: relative;">
      <div style="width: 75%; height: 100%; background: linear-gradient(to right, #ef4444, #dc2626);"></div>
      <div style="position: absolute; left: 90%; top: -2px; bottom: -2px; width: 2px; background: #60a5fa;"></div>
    </div>
    <div style="font-size: 0.75rem; color: #94a3b8; margin-top: 4px;">üîÑ Hybrid ‚Ä¢ Accuracy of query complexity classification</div>
  </div>
  
  <div style="margin-bottom: 20px;">
    <div style="font-weight: 600; color: #e5e7eb; margin-bottom: 4px;">Analysis Quality</div>
    <div style="display: flex; justify-content: space-between; margin: 8px 0;">
      <span style="color: #cbd5e1;">Score: <strong style="color: #ef4444;">77.1%</strong></span>
      <span style="color: #cbd5e1;">Target: 80.0%</span>
    </div>
    <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px; overflow: hidden; position: relative;">
      <div style="width: 77.1%; height: 100%; background: linear-gradient(to right, #ef4444, #dc2626);"></div>
      <div style="position: absolute; left: 80%; top: -2px; bottom: -2px; width: 2px; background: #60a5fa;"></div>
    </div>
    <div style="font-size: 0.75rem; color: #94a3b8; margin-top: 4px;">üß† LLM Judge ‚Ä¢ Comprehensiveness of medical analysis</div>
  </div>
  
  <div style="margin-bottom: 20px;">
    <div style="font-weight: 600; color: #e5e7eb; margin-bottom: 4px;">Specialty Selection</div>
    <div style="display: flex; justify-content: space-between; margin: 8px 0;">
      <span style="color: #cbd5e1;">Score: <strong style="color: #10b981;">92.5%</strong></span>
      <span style="color: #cbd5e1;">Target: 85.0%</span>
    </div>
    <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px; overflow: hidden; position: relative;">
      <div style="width: 92.5%; height: 100%; background: linear-gradient(to right, #10b981, #059669);"></div>
      <div style="position: absolute; left: 85%; top: -2px; bottom: -2px; width: 2px; background: #60a5fa;"></div>
    </div>
    <div style="font-size: 0.75rem; color: #94a3b8; margin-top: 4px;">üß† LLM Judge ‚Ä¢ Precision in selecting appropriate medical specialists</div>
  </div>
  
  <div style="margin-bottom: 20px;">
    <div style="font-weight: 600; color: #e5e7eb; margin-bottom: 4px;">Tool Usage</div>
    <div style="display: flex; justify-content: space-between; margin: 8px 0;">
      <span style="color: #cbd5e1;">Score: <strong style="color: #10b981;">100.0%</strong></span>
      <span style="color: #cbd5e1;">Target: 90.0%</span>
    </div>
    <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px; overflow: hidden; position: relative;">
      <div style="width: 100%; height: 100%; background: linear-gradient(to right, #10b981, #059669);"></div>
      <div style="position: absolute; left: 90%; top: -2px; bottom: -2px; width: 2px; background: #60a5fa;"></div>
    </div>
    <div style="font-size: 0.75rem; color: #94a3b8; margin-top: 4px;">üîß Deterministic ‚Ä¢ Effectiveness of tool calls</div>
  </div>
  
  <div style="margin-bottom: 20px;">
    <div style="font-weight: 600; color: #e5e7eb; margin-bottom: 4px;">Response Structure</div>
    <div style="display: flex; justify-content: space-between; margin: 8px 0;">
      <span style="color: #cbd5e1;">Score: <strong style="color: #10b981;">100.0%</strong></span>
      <span style="color: #cbd5e1;">Target: 95.0%</span>
    </div>
    <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px; overflow: hidden; position: relative;">
      <div style="width: 100%; height: 100%; background: linear-gradient(to right, #10b981, #059669);"></div>
      <div style="position: absolute; left: 95%; top: -2px; bottom: -2px; width: 2px; background: #60a5fa;"></div>
    </div>
    <div style="font-size: 0.75rem; color: #94a3b8; margin-top: 4px;">üîß Deterministic ‚Ä¢ Compliance with XML format</div>
  </div>
  
  <div style="background: rgba(239,68,68,0.1); padding: 16px; border-radius: 8px; margin-top: 20px; border: 1px solid rgba(239,68,68,0.2);">
    <strong style="color: #fca5a5;">Dimension Failure Details:</strong>
    <ul style="margin-top: 8px; color: #e5e7eb;">
      <li><strong>Complexity Classification:</strong> 1 of 4 tests failed (25%)</li>
      <li><strong>Analysis Quality:</strong> 3 of 4 tests failed (75%)</li>
    </ul>
  </div>
</div>

<h2 style="color: white; display: flex; align-items: center; gap: 12px;">
  <span style="background: rgba(59,130,246,0.2); width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">üîç</span>
  Failure Patterns & Common Issues
</h2>

<div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
  <h3 style="color: #60a5fa; margin: 0 0 12px 0;">Complexity Classification Issues</h3>
  <p style="margin: 0 0 8px 0; color: #e5e7eb;">Found 1 test(s) with misclassified complexity.</p>
  <div style="background: rgba(59,130,246,0.1); padding: 12px; border-radius: 8px; font-size: 0.875rem; border: 1px solid rgba(59,130,246,0.1);">
    <strong style="color: #60a5fa;">Common Pattern:</strong> <span style="color: #e5e7eb;">The CMO is over-analyzing a straightforward trend request by adding extensive clinical interpretation and specialist requirements that weren't part of the original query</span>
  </div>
</div>

<div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 20px; margin-bottom: 16px;">
  <h3 style="color: #60a5fa; margin: 0 0 12px 0;">Analysis Quality Issues</h3>
  <p style="margin: 0 0 8px 0; color: #e5e7eb;">Found 3 test(s) below quality threshold.</p>
  <div style="background: rgba(59,130,246,0.1); padding: 12px; border-radius: 8px; font-size: 0.875rem; border: 1px solid rgba(59,130,246,0.1);">
    <strong style="color: #60a5fa;">Most common issue:</strong> <span style="color: #e5e7eb;">Comprehensive Approach (failed in 3 tests)</span>
  </div>
</div>

<div style="background: rgba(59,130,246,0.1); padding: 16px; border-radius: 8px; margin-top: 16px; border: 1px solid rgba(59,130,246,0.2);">
  <p style="margin: 0; font-size: 0.875rem; color: #e5e7eb;">
    üí° <strong style="color: #60a5fa;">Note:</strong> Detailed analysis for each test is available in the Test Results section below.
  </p>
</div>

<h2 style="color: white; display: flex; align-items: center; gap: 12px;">
  <span style="background: rgba(59,130,246,0.2); width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">üìã</span>
  Test Results Detail
</h2>

<div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); padding: 16px; border-radius: 8px; margin-bottom: 24px; border: 1px solid rgba(255,255,255,0.1);">
  <strong style="color: #60a5fa;">Prompts Being Tested:</strong>
  <ul style="margin-top: 8px; color: #e5e7eb;">
    <li><a href="../../../services/agents/cmo/prompts/1_initial_analysis.txt" style="color: #60a5fa; text-decoration: none;"><code style="background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px;">1_initial_analysis.txt</code></a> - Analyzes query complexity</li>
    <li><a href="../../../services/agents/cmo/prompts/2_initial_analysis_summarize.txt" style="color: #60a5fa; text-decoration: none;"><code style="background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px;">2_initial_analysis_summarize.txt</code></a> - Summarizes findings</li>
    <li><a href="../../../services/agents/cmo/prompts/3_task_creation.txt" style="color: #60a5fa; text-decoration: none;"><code style="background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px;">3_task_creation.txt</code></a> - Creates specialist tasks</li>
  </ul>
</div>

<hr style="border: 0; height: 1px; background: rgba(255,255,255,0.1); margin: 32px 0;">

<h2 style="color: white;">Test Case: standard_001 ‚ùå</h2>

<div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); border-radius: 16px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); overflow: hidden; margin-bottom: 24px; border: 1px solid rgba(255,255,255,0.1);">
  <div style="background: linear-gradient(135deg, rgba(59,130,246,0.3), rgba(6,182,212,0.3)); padding: 20px 24px; border-bottom: 1px solid rgba(255,255,255,0.1);">
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <h3 style="margin: 0; color: white; font-size: 1.25rem;">Test Case: standard_001</h3>
      <span style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 6px 16px; border-radius: 20px; font-size: 0.875rem; font-weight: 600;">FAILED</span>
    </div>
  </div>
  
  <div style="padding: 24px;">
    <div style="background: rgba(255,255,255,0.05); padding: 16px; border-radius: 8px; margin-bottom: 16px; border: 1px solid rgba(255,255,255,0.1);">
      <strong style="color: #60a5fa;">Health Query:</strong>
      <p style="margin: 8px 0 0 0; color: #e5e7eb;">What's my cholesterol trend over my entire data? I want to see trends across the top 4 cholesterol metrics including Triglycerides across that time period</p>
    </div>
    
    <!-- Collapsible Health Query Response -->
    <div style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; margin-bottom: 16px; overflow: hidden;">
      <div class="collapsible collapsible-header" onclick="toggleSection(this)">
        <strong style="color: #60a5fa;">Health Query Response/Analysis</strong>
        <span class="collapsible-arrow">‚ñº</span>
      </div>
      <div class="collapsible-content">
        <div style="padding: 16px; background: rgba(0,0,0,0.3); color: #e5e7eb; font-size: 0.875rem; line-height: 1.6;">
          <p style="margin: 0 0 16px 0;"><strong>Detailed medical approach including:</strong></p>
          
          <p style="margin: 0 0 12px 0;"><strong>Specialists Needed:</strong></p>
          <ol style="margin: 0 0 16px 16px; padding-left: 20px;">
            <li style="margin-bottom: 8px;"><strong>Cardiologist</strong> - Primary specialist needed given the cardiovascular risk implications of cholesterol trends spanning 11+ years (2013-2025)</li>
            <li style="margin-bottom: 8px;"><strong>Endocrinologist</strong> - To evaluate metabolic factors, especially given the significant triglyceride fluctuations (ranging from 51 to 426 mg/dL)</li>
            <li style="margin-bottom: 8px;"><strong>Internal Medicine/Primary Care</strong> - For overall health context and medication management</li>
          </ol>
          
          <p style="margin: 0 0 12px 0;"><strong>Key Data Points to Investigate:</strong></p>
          <ol style="margin: 0 0 16px 16px; padding-left: 20px;">
            <li style="margin-bottom: 12px;">
              <strong>Trend Analysis Across Time:</strong>
              <ul style="margin-top: 8px; padding-left: 20px;">
                <li>Total Cholesterol: Ranges from 110-187 mg/dL</li>
                <li>LDL Cholesterol: Ranges from 38-122 mg/dL</li>
                <li>HDL Cholesterol: Ranges from 20-47 mg/dL (frequently below normal)</li>
                <li>Triglycerides: Extreme variability from 51-426 mg/dL</li>
              </ul>
            </li>
            
            <li style="margin-bottom: 12px;">
              <strong>Critical Patterns Identified:</strong>
              <ul style="margin-top: 8px; padding-left: 20px;">
                <li>Persistently low HDL cholesterol (multiple readings below 40 mg/dL reference range)</li>
                <li>Highly variable triglycerides with several severely elevated readings (>400 mg/dL in 2013-2014)</li>
                <li>Recent improvement trend but still suboptimal HDL levels</li>
              </ul>
            </li>
            
            <li style="margin-bottom: 12px;">
              <strong>Temporal Correlations to Explore:</strong>
              <ul style="margin-top: 8px; padding-left: 20px;">
                <li>What interventions occurred between 2014-2015 that dramatically reduced triglycerides?</li>
                <li>Why did HDL remain persistently low despite other improvements?</li>
                <li>Recent 2025 uptick in triglycerides (153 mg/dL) after years of control</li>
              </ul>
            </li>
          </ol>
          
          <p style="margin: 0 0 12px 0;"><strong>Immediate Concerns Noted:</strong></p>
          <ol style="margin: 0 0 16px 16px; padding-left: 20px;">
            <li style="margin-bottom: 8px;"><strong>Cardiovascular Risk:</strong> Low HDL (<40 mg/dL) is an independent risk factor for heart disease</li>
            <li style="margin-bottom: 8px;"><strong>Metabolic Syndrome Indicators:</strong> The combination of low HDL and variable high triglycerides</li>
            <li style="margin-bottom: 8px;"><strong>Recent Deterioration:</strong> 2025 shows worsening trends compared to 2021-2023 period</li>
            <li style="margin-bottom: 8px;"><strong>Historical Severe Hypertriglyceridemia:</strong> Past readings >400 mg/dL indicate risk for pancreatitis</li>
          </ol>
          
          <p style="margin: 0 0 12px 0;"><strong>Additional Analysis Needed:</strong></p>
          <ul style="margin: 0 0 16px 16px; padding-left: 20px;">
            <li>Medication history and compliance</li>
            <li>Lifestyle factors (diet, exercise, alcohol intake)</li>
            <li>Family history of lipid disorders</li>
            <li>Associated conditions (diabetes, thyroid disease)</li>
            <li>Calculate non-HDL cholesterol trends and ratios for better risk assessment</li>
          </ul>
        </div>
      </div>
    </div>
    
    <div style="display: flex; gap: 16px; margin: 16px 0;">
      <div style="background: rgba(255,255,255,0.05); padding: 8px 16px; border-radius: 8px; font-size: 0.875rem; border: 1px solid rgba(255,255,255,0.1);">
        <strong style="color: #60a5fa;">Response Time:</strong> <span style="color: #e5e7eb;">76.3s</span>
      </div>
    </div>
    
    <h4 style="color: #e5e7eb;">Evaluation Summary</h4>
    
    <div style="background: rgba(255,255,255,0.05); border-radius: 8px; overflow: hidden; margin: 16px 0;">
      <table style="width: 100%; border-collapse: collapse; color: #e5e7eb;">
        <thead>
          <tr style="background: rgba(255,255,255,0.1);">
            <th style="padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1);">Dimension</th>
            <th style="padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1);">Expected</th>
            <th style="padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1);">Actual</th>
            <th style="padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1);">Score</th>
            <th style="padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1);">Target</th>
            <th style="padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1);">Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding: 12px; font-weight: 600;">Complexity Classification</td>
            <td style="padding: 12px;">STANDARD</td>
            <td style="padding: 12px;">COMPLEX</td>
            <td style="padding: 12px;">0.00</td>
            <td style="padding: 12px;">0.90</td>
            <td style="padding: 12px;"><span style="background: rgba(239,68,68,0.2); color: #fca5a5; padding: 4px 8px; border-radius: 4px;">‚ùå FAIL</span></td>
          </tr>
          <tr style="background: rgba(255,255,255,0.02);">
            <td style="padding: 12px; font-weight: 600;">Specialist Selection</td>
            <td style="padding: 12px; font-size: 0.875rem;">cardiology, data_analysis, endocrinology</td>
            <td style="padding: 12px; font-size: 0.875rem;">cardiology, data_analysis, endocrinology, laboratory_medicine, pharmacy</td>
            <td style="padding: 12px;">0.90</td>
            <td style="padding: 12px;">0.85</td>
            <td style="padding: 12px;"><span style="background: rgba(16,185,129,0.2); color: #6ee7b7; padding: 4px 8px; border-radius: 4px;">‚úÖ PASS</span></td>
          </tr>
          <tr>
            <td style="padding: 12px; font-weight: 600;">Analysis Quality</td>
            <td style="padding: 12px;">‚â•0.80</td>
            <td style="padding: 12px;">0.83</td>
            <td style="padding: 12px;">0.83</td>
            <td style="padding: 12px;">0.80</td>
            <td style="padding: 12px;"><span style="background: rgba(16,185,129,0.2); color: #6ee7b7; padding: 4px 8px; border-radius: 4px;">‚úÖ PASS</span></td>
          </tr>
          <tr style="background: rgba(255,255,255,0.02);">
            <td style="padding: 12px; font-weight: 600;">Tool Usage</td>
            <td style="padding: 12px;">Effective</td>
            <td style="padding: 12px;">1 calls</td>
            <td style="padding: 12px;">1.00</td>
            <td style="padding: 12px;">0.90</td>
            <td style="padding: 12px;"><span style="background: rgba(16,185,129,0.2); color: #6ee7b7; padding: 4px 8px; border-radius: 4px;">‚úÖ PASS</span></td>
          </tr>
          <tr>
            <td style="padding: 12px; font-weight: 600;">Response Structure</td>
            <td style="padding: 12px;">Valid XML</td>
            <td style="padding: 12px;">Valid</td>
            <td style="padding: 12px;">1.00</td>
            <td style="padding: 12px;">0.95</td>
            <td style="padding: 12px;"><span style="background: rgba(16,185,129,0.2); color: #6ee7b7; padding: 4px 8px; border-radius: 4px;">‚úÖ PASS</span></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Enhanced Failure Analysis Section -->
    <div class="failure-card">
      <div class="failure-header">
        <div class="failure-icon">üî¨</div>
        <h4 style="color: white; margin: 0; font-size: 1.25rem;">LLM Judge Failure Analysis</h4>
      </div>
      
      <div class="failure-item">
        <p style="margin: 0 0 8px 0; color: white; font-weight: 600; font-size: 1.1rem;">
          ‚ö†Ô∏è Complexity Classification Issue
        </p>
        <p style="margin: 0; color: #e5e7eb;">
          The CMO is over-analyzing a straightforward trend request by adding extensive clinical interpretation and specialist requirements that weren't part of the original query
        </p>
      </div>
      
      <div class="failure-item">
        <p style="margin: 0 0 8px 0; color: white; font-weight: 600;">
          üîç Root Cause Analysis
        </p>
        <p style="margin: 0; color: #e5e7eb; font-size: 0.9rem;">
          The original query simply asked to see trends across cholesterol metrics over time - a straightforward data visualization request. The CMO added unnecessary clinical interpretation, specialist involvement, and detailed medical analysis that wasn't requested. The proposed changes will help the CMO distinguish between requests for simple data trending (STANDARD) versus requests requiring medical interpretation (COMPLEX). This will prevent over-classification of basic trending requests as complex cases.
        </p>
      </div>
      
      <div style="display: flex; align-items: center; gap: 12px; margin: 20px 0;">
        <span style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 6px 16px; border-radius: 20px; font-weight: 600;">HIGH PRIORITY</span>
        <code style="background: rgba(255,255,255,0.1); padding: 6px 12px; border-radius: 6px; font-size: 0.875rem;">backend/services/agents/cmo/prompts/1_initial_analysis.txt</code>
      </div>
      
      <div class="recommendation-box">
        <p style="margin: 0 0 12px 0; color: #60a5fa; font-weight: 600;">
          üí° Recommended Prompt Changes
        </p>
        <ul style="margin: 0; padding-left: 20px; color: #e5e7eb;">
          <li style="margin-bottom: 8px;">Add explicit guidance: 'If the query only asks for data visualization or trending of lab values without requesting medical interpretation, classify as STANDARD'</li>
          <li style="margin-bottom: 8px;">Add example: 'STANDARD example: Show me trends of my cholesterol numbers over time'</li>
          <li>Add boundary clarification: 'Complex classification should only be used when the query explicitly requests medical interpretation, risk analysis, or treatment recommendations'</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<hr style="border: 0; height: 1px; background: rgba(255,255,255,0.1); margin: 32px 0;">

<h2 style="color: white;">Test Case: standard_002 ‚ùå</h2>

<div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); border-radius: 16px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); overflow: hidden; margin-bottom: 24px; border: 1px solid rgba(255,255,255,0.1);">
  <div style="background: linear-gradient(135deg, rgba(59,130,246,0.3), rgba(6,182,212,0.3)); padding: 20px 24px; border-bottom: 1px solid rgba(255,255,255,0.1);">
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <h3 style="margin: 0; color: white; font-size: 1.25rem;">Test Case: standard_002</h3>
      <span style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 6px 16px; border-radius: 20px; font-size: 0.875rem; font-weight: 600;">FAILED</span>
    </div>
  </div>
  
  <div style="padding: 24px;">
    <div style="background: rgba(255,255,255,0.05); padding: 16px; border-radius: 8px; margin-bottom: 16px; border: 1px solid rgba(255,255,255,0.1);">
      <strong style="color: #60a5fa;">Health Query:</strong>
      <p style="margin: 8px 0 0 0; color: #e5e7eb;">Show my abnormal lab results from labs this year?</p>
    </div>
    
    <!-- Collapsible Health Query Response -->
    <div style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; margin-bottom: 16px; overflow: hidden;">
      <div class="collapsible collapsible-header" onclick="toggleSection(this)">
        <strong style="color: #60a5fa;">Health Query Response/Analysis</strong>
        <span class="collapsible-arrow">‚ñº</span>
      </div>
      <div class="collapsible-content">
        <div style="padding: 16px; background: rgba(0,0,0,0.3); color: #e5e7eb; font-size: 0.875rem; line-height: 1.6;">
          <p style="margin: 0 0 16px 0;"><strong>Detailed medical approach including:</strong></p>
          
          <p style="margin: 0 0 12px 0;"><strong>Specialists Needed:</strong></p>
          <ol style="margin: 0 0 16px 16px; padding-left: 20px;">
            <li style="margin-bottom: 8px;"><strong>Primary Care Physician</strong> - To oversee overall interpretation and coordinate care</li>
            <li style="margin-bottom: 8px;"><strong>Endocrinologist</strong> - Due to elevated HbA1c (6.1%) indicating prediabetes/early diabetes</li>
            <li style="margin-bottom: 8px;"><strong>Nephrologist or Internist</strong> - To evaluate elevated Blood Urea Nitrogen (BUN) at 23 mg/dL</li>
          </ol>
          
          <p style="margin: 0 0 12px 0;"><strong>Key Data Points to Investigate:</strong></p>
          <ol style="margin: 0 0 16px 16px; padding-left: 20px;">
            <li style="margin-bottom: 12px;">
              <strong>HbA1c at 6.1%</strong> (Reference: 4-5.6%)
              <ul style="margin-top: 8px; padding-left: 20px;">
                <li>Indicates prediabetes (5.7-6.4% range)</li>
                <li>Need to review glucose trends and any prior HbA1c values</li>
                <li>Check for related metabolic markers</li>
              </ul>
            </li>
            
            <li style="margin-bottom: 12px;">
              <strong>BUN at 23 mg/dL</strong> (Reference: 6-20 mg/dL)
              <ul style="margin-top: 8px; padding-left: 20px;">
                <li>Mildly elevated, could indicate:
                  <ul style="margin-top: 4px; padding-left: 20px;">
                    <li>Dehydration</li>
                    <li>High protein diet</li>
                    <li>Early kidney dysfunction</li>
                    <li>Medication effects</li>
                  </ul>
                </li>
                <li>Need to correlate with creatinine and eGFR</li>
              </ul>
            </li>
            
            <li style="margin-bottom: 12px;">
              <strong>Bilirubin, Direct at 0.15 mg/dL</strong> - Within normal range but at upper limit
            </li>
          </ol>
          
          <p style="margin: 0 0 12px 0;"><strong>Potential Correlations to Explore:</strong></p>
          <ul style="margin: 0 0 16px 16px; padding-left: 20px;">
            <li>Diabetes/kidney disease connection (diabetic nephropathy risk)</li>
            <li>Need complete metabolic panel trends</li>
            <li>Blood pressure readings (hypertension correlation)</li>
            <li>Lipid panel (metabolic syndrome evaluation)</li>
            <li>Urinalysis for proteinuria</li>
            <li>Previous glucose and HbA1c trends</li>
          </ul>
          
          <p style="margin: 0 0 12px 0;"><strong>Immediate Concerns:</strong></p>
          <ul style="margin: 0 0 16px 16px; padding-left: 20px;">
            <li>The HbA1c of 6.1% indicates prediabetes, requiring lifestyle intervention and monitoring</li>
            <li>Elevated BUN needs further evaluation with complete renal function tests</li>
            <li>All abnormal results are from the same date (April 7, 2025), suggesting need for follow-up testing to confirm trends</li>
          </ul>
          
          <p style="margin: 0 0 12px 0;"><strong>Recommended Next Steps:</strong></p>
          <ol style="margin: 0 16px; padding-left: 20px;">
            <li>Query for additional related lab data (glucose, creatinine, eGFR, lipids)</li>
            <li>Check for any prior HbA1c or BUN values for comparison</li>
            <li>Look for blood pressure readings</li>
            <li>Review medications that could affect these values</li>
          </ol>
        </div>
      </div>
    </div>
    
    <div style="display: flex; gap: 16px; margin: 16px 0;">
      <div style="background: rgba(255,255,255,0.05); padding: 8px 16px; border-radius: 8px; font-size: 0.875rem; border: 1px solid rgba(255,255,255,0.1);">
        <strong style="color: #60a5fa;">Response Time:</strong> <span style="color: #e5e7eb;">53.0s</span>
      </div>
    </div>
    
    <h4 style="color: #e5e7eb;">Evaluation Summary</h4>
    
    <div style="background: rgba(255,255,255,0.05); border-radius: 8px; overflow: hidden; margin: 16px 0;">
      <table style="width: 100%; border-collapse: collapse; color: #e5e7eb;">
        <thead>
          <tr style="background: rgba(255,255,255,0.1);">
            <th style="padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1);">Dimension</th>
            <th style="padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1);">Expected</th>
            <th style="padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1);">Actual</th>
            <th style="padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1);">Score</th>
            <th style="padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1);">Target</th>
            <th style="padding: 12px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1);">Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding: 12px; font-weight: 600;">Complexity Classification</td>
            <td style="padding: 12px;">STANDARD</td>
            <td style="padding: 12px;">STANDARD</td>
            <td style="padding: 12px;">1.00</td>
            <td style="padding: 12px;">0.90</td>
            <td style="padding: 12px;"><span style="background: rgba(16,185,129,0.2); color: #6ee7b7; padding: 4px 8px; border-radius: 4px;">‚úÖ PASS</span></td>
          </tr>
          <tr style="background: rgba(255,255,255,0.02);">
            <td style="padding: 12px; font-weight: 600;">Specialist Selection</td>
            <td style="padding: 12px; font-size: 0.875rem;">endocrinology, laboratory_medicine, preventive_medicine</td>
            <td style="padding: 12px; font-size: 0.875rem;">endocrinology, laboratory_medicine, preventive_medicine</td>
            <td style="padding: 12px;">1.00</td>
            <td style="padding: 12px;">0.85</td>
            <td style="padding: 12px;"><span style="background: rgba(16,185,129,0.2); color: #6ee7b7; padding: 4px 8px; border-radius: 4px;">‚úÖ PASS</span></td>
          </tr>
          <tr>
            <td style="padding: 12px; font-weight: 600;">Analysis Quality</td>
            <td style="padding: 12px;">‚â•0.80</td>
            <td style="padding: 12px;">0.75</td>
            <td style="padding: 12px;">0.75</td>
            <td style="padding: 12px;">0.80</td>
            <td style="padding: 12px;"><span style="background: rgba(239,68,68,0.2); color: #fca5a5; padding: 4px 8px; border-radius: 4px;">‚ùå FAIL</span></td>
          </tr>
          <tr style="background: rgba(255,255,255,0.02);">
            <td style="padding: 12px; font-weight: 600;">Tool Usage</td>
            <td style="padding: 12px;">Effective</td>
            <td style="padding: 12px;">1 calls</td>
            <td style="padding: 12px;">1.00</td>
            <td style="padding: 12px;">0.90</td>
            <td style="padding: 12px;"><span style="background: rgba(16,185,129,0.2); color: #6ee7b7; padding: 4px 8px; border-radius: 4px;">‚úÖ PASS</span></td>
          </tr>
          <tr>
            <td style="padding: 12px; font-weight: 600;">Response Structure</td>
            <td style="padding: 12px;">Valid XML</td>
            <td style="padding: 12px;">Valid</td>
            <td style="padding: 12px;">1.00</td>
            <td style="padding: 12px;">0.95</td>
            <td style="padding: 12px;"><span style="background: rgba(16,185,129,0.2); color: #6ee7b7; padding: 4px 8px; border-radius: 4px;">‚úÖ PASS</span></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Collapsible Analysis Quality Score Breakdown -->
    <div style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; margin: 16px 0; overflow: hidden;">
      <div class="collapsible collapsible-header" onclick="toggleSection(this)">
        <strong style="color: #60a5fa;">Analysis Quality Score Breakdown</strong>
        <span class="collapsible-arrow">‚ñº</span>
      </div>
      <div class="collapsible-content">
        <div style="padding: 16px;">
          <p style="margin: 0 0 16px 0; color: #cbd5e1;">This breakdown shows how the Analysis Quality score was calculated:</p>
          
          <div style="background: rgba(255,255,255,0.05); border-radius: 8px; overflow: hidden;">
            <table style="width: 100%; border-collapse: collapse; color: #e5e7eb;">
              <thead>
                <tr style="background: rgba(255,255,255,0.1);">
                  <th style="padding: 12px; text-align: left;">Component</th>
                  <th style="padding: 12px; text-align: left;">Weight</th>
                  <th style="padding: 12px; text-align: left;">Score</th>
                  <th style="padding: 12px; text-align: left;">Weighted</th>
                  <th style="padding: 12px; text-align: left;">What We Looked For</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style="padding: 12px;">Data Gathering</td>
                  <td style="padding: 12px;">0.20</td>
                  <td style="padding: 12px;">1.00</td>
                  <td style="padding: 12px;">0.200</td>
                  <td style="padding: 12px; font-size: 0.875rem; color: #94a3b8;">Made appropriate tool calls to gather health data</td>
                </tr>
                <tr style="background: rgba(255,255,255,0.02);">
                  <td style="padding: 12px;">Context Awareness</td>
                  <td style="padding: 12px;">0.15</td>
                  <td style="padding: 12px;">1.00</td>
                  <td style="padding: 12px;">0.150</td>
                  <td style="padding: 12px; font-size: 0.875rem; color: #94a3b8;">Mentioned dates, timeframes, or temporal context</td>
                </tr>
                <tr>
                  <td style="padding: 12px;">Specialist Rationale</td>
                  <td style="padding: 12px;">0.20</td>
                  <td style="padding: 12px;">1.00</td>
                  <td style="padding: 12px;">0.200</td>
                  <td style="padding: 12px; font-size: 0.875rem; color: #94a3b8;">Clear reasoning provided for specialist selection</td>
                </tr>
                <tr style="background: rgba(239,68,68,0.1);">
                  <td style="padding: 12px; font-weight: 600;">Comprehensive Approach</td>
                  <td style="padding: 12px;">0.25</td>
                  <td style="padding: 12px; color: #fca5a5;">0.00</td>
                  <td style="padding: 12px;">0.000</td>
                  <td style="padding: 12px; font-size: 0.875rem; color: #fca5a5;">0/4 keywords. ‚úó Missed: lab_results, abnormal_flags, current_year, reference_ranges</td>
                </tr>
                <tr style="background: rgba(255,255,255,0.02);">
                  <td style="padding: 12px;">Concern Identification</td>
                  <td style="padding: 12px;">0.20</td>
                  <td style="padding: 12px;">1.00</td>
                  <td style="padding: 12px;">0.200</td>
                  <td style="padding: 12px; font-size: 0.875rem; color: #94a3b8;">Identified specific health concerns or risks</td>
                </tr>
                <tr style="background: rgba(255,255,255,0.1); font-weight: 600;">
                  <td style="padding: 12px;">Total</td>
                  <td style="padding: 12px;">1.00</td>
                  <td style="padding: 12px;">-</td>
                  <td style="padding: 12px;">0.750</td>
                  <td style="padding: 12px;">Target: ‚â• 0.800</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Enhanced Failure Analysis Section -->
    <div class="failure-card">
      <div class="failure-header">
        <div class="failure-icon">üî¨</div>
        <h4 style="color: white; margin: 0; font-size: 1.25rem;">LLM Judge Failure Analysis</h4>
      </div>
      
      <div class="failure-item">
        <p style="margin: 0 0 8px 0; color: white; font-weight: 600; font-size: 1.1rem;">
          ‚ö†Ô∏è Analysis Quality Issue
        </p>
        <p style="margin: 0; color: #e5e7eb;">
          The CMO's analysis, while detailed in some areas, lacks a truly comprehensive approach to abnormal lab result analysis as evidenced by missing key contextual elements and incomplete data integration
        </p>
      </div>
      
      <div class="failure-item">
        <p style="margin: 0 0 8px 0; color: white; font-weight: 600;">
          üîç Root Cause Analysis
        </p>
        <p style="margin: 0; color: #e5e7eb; font-size: 0.9rem;">
          The prompt did not explicitly require the CMO to address all essential components of lab result analysis, including temporal trends, complete reference ranges for all mentioned values, and integration with patient demographics and clinical history
        </p>
      </div>
      
      <div class="failure-item">
        <p style="margin: 0 0 8px 0; color: white; font-weight: 600;">
          üìâ Weak Components
        </p>
        <ul style="margin: 8px 0 0 20px; color: #e5e7eb; font-size: 0.9rem;">
          <li>Comprehensive Approach: Failed to include patient demographics, missing reference ranges for some labs, no temporal analysis of lab trends, and incomplete integration of clinical context with lab findings</li>
        </ul>
      </div>
      
      <div style="display: flex; align-items: center; gap: 12px; margin: 20px 0;">
        <span style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 6px 16px; border-radius: 20px; font-weight: 600;">HIGH PRIORITY</span>
        <code style="background: rgba(255,255,255,0.1); padding: 6px 12px; border-radius: 6px; font-size: 0.875rem;">backend/services/agents/cmo/prompts/1_initial_analysis.txt</code>
      </div>
      
      <div class="recommendation-box">
        <p style="margin: 0 0 12px 0; color: #60a5fa; font-weight: 600;">
          üí° Recommended Prompt Changes
        </p>
        <ul style="margin: 0; padding-left: 20px; color: #e5e7eb;">
          <li style="margin-bottom: 8px;">Add instruction in prompt: 'Always include complete reference ranges for ALL mentioned laboratory values'</li>
          <li style="margin-bottom: 8px;">Add instruction in prompt: 'Analyze temporal trends by comparing current results with historical values'</li>
          <li style="margin-bottom: 8px;">Add instruction in prompt: 'Include relevant patient demographics and clinical history context'</li>
          <li style="margin-bottom: 8px;">Modify section in prompt: 'Require explicit correlation between different lab values and their clinical significance'</li>
          <li>Add instruction in prompt: 'Provide specific diagnostic criteria when discussing conditions like prediabetes or kidney disease'</li>
        </ul>
      </div>
      
      <div style="background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.3); border-radius: 12px; padding: 16px; margin-top: 16px;">
        <p style="margin: 0; color: #6ee7b7; font-weight: 600;">
          üìà Expected Impact
        </p>
        <p style="margin: 8px 0 0 0; color: #e5e7eb; font-size: 0.9rem;">
          Enhanced analysis quality through more systematic and comprehensive lab result evaluation, better clinical context integration, and clearer connection between lab values and medical decision-making
        </p>
      </div>
    </div>
  </div>
</div>

<div style="padding: 32px; text-align: center; color: #94a3b8; font-style: italic;">
  ... Additional test cases (complex_001 and complex_002) continue with the same enhanced styling pattern ...
</div>

<hr style="border: 0; height: 1px; background: rgba(255,255,255,0.1); margin: 32px 0;">

<h2 style="color: white; display: flex; align-items: center; gap: 12px;">
  <span style="background: rgba(59,130,246,0.2); width: 40px; height: 40px; border-radius: 8px; display: flex; align-items: center; justify-content: center;">üìä</span>
  Visualizations
</h2>

<h3 style="color: white;">Performance by Dimension</h3>
<div style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 16px;">
The chart below shows how the CMO Agent performs across each evaluation dimension compared to target thresholds:
</div>

<div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); border-radius: 16px; padding: 40px; text-align: center; border: 2px dashed rgba(255,255,255,0.2); margin: 24px 0;">
  <div style="font-size: 3rem; margin-bottom: 16px;">üìä</div>
  <h4 style="color: #60a5fa; margin-bottom: 8px;">Dimension Scores</h4>
  <p style="color: #cbd5e1; font-size: 0.875rem;">Performance across evaluation dimensions vs. target thresholds</p>
  <img src="./dimension_scores.png" alt="Dimension Scores Chart" style="max-width: 100%; height: auto; margin-top: 20px; border-radius: 8px;">
</div>

<h3 style="color: white;">Additional Performance Charts</h3>

<div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); border-radius: 12px; padding: 20px; margin-top: 24px; border: 1px solid rgba(255,255,255,0.1);">
  <p style="margin: 0 0 16px 0; color: #60a5fa; font-weight: 600;">Click on any chart below to view additional performance insights:</p>
  
  <div style="background: rgba(255,255,255,0.05); border-radius: 8px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
    <table style="width: 100%; border-collapse: collapse; color: #e5e7eb;">
      <thead>
        <tr style="background: linear-gradient(135deg, rgba(59,130,246,0.2), rgba(168,85,247,0.2));">
          <th style="padding: 16px; text-align: left; font-weight: 600;">Chart</th>
          <th style="padding: 16px; text-align: left; font-weight: 600;">What It Shows</th>
          <th style="padding: 16px; text-align: left; font-weight: 600;">Key Insights</th>
        </tr>
      </thead>
      <tbody>
        <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
          <td style="padding: 16px;">
            <a href="./complexity_performance.png" style="color: #60a5fa; text-decoration: none; font-weight: 600;">Complexity Performance</a>
          </td>
          <td style="padding: 16px;">Metrics by query complexity (STANDARD vs COMPLEX)</td>
          <td style="padding: 16px; color: #94a3b8;">See if certain query types perform better</td>
        </tr>
        <tr style="background: rgba(255,255,255,0.02); border-bottom: 1px solid rgba(255,255,255,0.1);">
          <td style="padding: 16px;">
            <a href="./response_time_distribution.png" style="color: #60a5fa; text-decoration: none; font-weight: 600;">Response Time Distribution</a>
          </td>
          <td style="padding: 16px;">Histogram of processing times</td>
          <td style="padding: 16px; color: #94a3b8;">Understand performance consistency</td>
        </tr>
        <tr>
          <td style="padding: 16px;">
            <a href="./specialty_heatmap.png" style="color: #60a5fa; text-decoration: none; font-weight: 600;">Specialty Heatmap</a>
          </td>
          <td style="padding: 16px;">Which specialists are selected together</td>
          <td style="padding: 16px; color: #94a3b8;">Identify common specialist combinations</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

</div>
</body>
<script>
function toggleSection(element) {
  const content = element.nextElementSibling;
  const arrow = element.querySelector('.collapsible-arrow');
  
  content.classList.toggle('open');
  arrow.classList.toggle('open');
}
</script>
</html>