<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Insight System - Synthesis & Visualization</title>
    <script src="https://cdn.tailwindcss.com/3.3.0"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/recharts@2.10.0/dist/Recharts.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Glassmorphism effects matching implementation */
        .glass-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
        }
        
        /* Custom gradient background */
        .gradient-bg {
            background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 50%, #ddd6fe 100%);
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes typewriter {
            from { width: 0; }
            to { width: 100%; }
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .fade-in-up {
            animation: fadeInUp 0.3s ease-out;
        }
        
        .typewriter {
            overflow: hidden;
            white-space: nowrap;
            animation: typewriter 2s steps(40) 1s 1 normal both;
        }
        
        .cursor::after {
            content: '|';
            animation: blink 1s infinite;
        }
        
        /* Custom scrollbar matching implementation */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f3f4f6;
            border-radius: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #9ca3af;
            border-radius: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
        
        /* Code artifact styling */
        .code-artifact {
            background: #1f2937;
            color: #e5e7eb;
            font-family: 'Monaco', 'Menlo', monospace;
        }
        
        /* Message bubbles matching implementation */
        .user-message {
            background: #3b82f6;
            color: white;
        }
        
        .assistant-message {
            background: white;
            border: 1px solid #e5e7eb;
        }
        
        /* Streaming code effect */
        @keyframes streamIn {
            from { 
                opacity: 0;
                transform: translateY(5px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .stream-line {
            animation: streamIn 0.1s ease-out;
        }
        
        /* Visualization tab badge */
        .tab-badge {
            background: #ef4444;
            color: white;
            font-size: 10px;
            padding: 1px 5px;
            border-radius: 10px;
            margin-left: 4px;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen overflow-hidden">
    <!-- Header matching implementation -->
    <header class="fixed top-0 w-full h-[73px] glass-panel border-b border-gray-200 z-50">
        <div class="h-full px-6 flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                    </svg>
                </div>
                <div>
                    <h1 class="text-xl font-semibold text-gray-900">Health Insight System</h1>
                    <p class="text-xs text-gray-500 tracking-wide">Multi-Agent Analysis • Powered by Anthropic Claude</p>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-2">
                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">Normal Health Status</span>
                    <span class="text-sm text-gray-600">George Vetticaden</span>
                </div>
                <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold shadow-md">
                    GV
                </div>
            </div>
        </div>
    </header>

    <!-- Main Layout - Three Panel Design -->
    <div class="flex h-screen pt-[73px]">
        <!-- Left Sidebar - Thread List -->
        <aside class="w-80 bg-white/60 backdrop-blur-sm border-r border-gray-200 flex flex-col">
            <div class="p-4 border-b border-gray-100 bg-white/80">
                <button class="w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-medium py-3 px-4 rounded-xl flex items-center justify-center space-x-2 transition-all duration-200 shadow-md hover:shadow-lg">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                    <span>New Conversation</span>
                </button>
            </div>
            
            <!-- Thread List -->
            <div class="flex-1 overflow-y-auto custom-scrollbar">
                <div class="px-4 pb-4 space-y-2">
                    <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mt-2 mb-1">Today</div>
                    
                    <!-- Active Thread -->
                    <div class="p-3 bg-white rounded-lg border-2 border-blue-400 cursor-pointer shadow-sm relative">
                        <div class="absolute left-0 top-0 bottom-0 w-1 bg-green-400 rounded-l"></div>
                        <h3 class="font-medium text-gray-900 text-sm mb-1">Cholesterol Trend Analysis</h3>
                        <p class="text-xs text-gray-600 line-clamp-2 mb-2">What's my cholesterol trend over the last 15 years? I want to see...</p>
                        <div class="flex items-center justify-between">
                            <time class="text-xs text-gray-400">2:36 PM</time>
                            <span class="text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded-full">Complete</span>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Center Panel - Chat Interface -->
        <main class="flex-shrink-0 flex flex-col bg-gray-50/50" style="width: 40%;">
            <!-- Chat Messages Area -->
            <div class="flex-1 overflow-y-auto custom-scrollbar">
                <div class="max-w-2xl mx-auto p-4 space-y-4">
                    <!-- Previous messages (condensed) -->
                    <div class="flex justify-end">
                        <div class="max-w-[70%]">
                            <div class="user-message rounded-2xl px-5 py-3 shadow-md">
                                <p class="text-sm">What's my cholesterol trend over the last 15 years? I want to see trends across the top 4 cholesterol metrics including Triglycerides across that time period</p>
                            </div>
                            <time class="text-xs text-gray-500 mt-1 block text-right mr-2">2:36 PM</time>
                        </div>
                    </div>
                    
                    <!-- Synthesis Complete Message -->
                    <div class="flex fade-in-up">
                        <div class="flex-shrink-0">
                            <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-md">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                                </svg>
                            </div>
                        </div>
                        <div class="ml-3 flex-1 max-w-[70%]">
                            <div class="assistant-message rounded-2xl px-5 py-4 shadow-sm">
                                <h3 class="font-semibold text-gray-900 mb-3">📊 15-Year Cholesterol Trend Analysis Complete</h3>
                                
                                <div class="space-y-4 text-sm text-gray-700">
                                    <div>
                                        <h4 class="font-medium text-gray-900 mb-2">🎯 Key Findings:</h4>
                                        <ul class="space-y-2 ml-4">
                                            <li class="flex items-start">
                                                <span class="text-green-500 mr-2">✓</span>
                                                <span><strong>Total Cholesterol:</strong> Improved from 274 mg/dL (2009) to 210 mg/dL (2024) - a 23% reduction</span>
                                            </li>
                                            <li class="flex items-start">
                                                <span class="text-green-500 mr-2">✓</span>
                                                <span><strong>LDL (Bad Cholesterol):</strong> Decreased from 198 mg/dL to 140 mg/dL - now at borderline high</span>
                                            </li>
                                            <li class="flex items-start">
                                                <span class="text-yellow-500 mr-2">⚠️</span>
                                                <span><strong>HDL (Good Cholesterol):</strong> Remains suboptimal at 42 mg/dL (target: >40 for men)</span>
                                            </li>
                                            <li class="flex items-start">
                                                <span class="text-red-500 mr-2">⚡</span>
                                                <span><strong>Triglycerides:</strong> Highly volatile (51-426 mg/dL range) - currently at 142 mg/dL</span>
                                            </li>
                                        </ul>
                                    </div>
                                    
                                    <div>
                                        <h4 class="font-medium text-gray-900 mb-2">📈 Trend Analysis:</h4>
                                        <ul class="space-y-1 ml-4 text-sm">
                                            <li>• Consistent improvement in Total and LDL cholesterol since 2017</li>
                                            <li>• Statin therapy (Lipitor) showing effectiveness</li>
                                            <li>• Triglyceride spikes correlate with weight fluctuations</li>
                                            <li>• HDL levels need improvement through lifestyle changes</li>
                                        </ul>
                                    </div>
                                    
                                    <div>
                                        <h4 class="font-medium text-gray-900 mb-2">💊 Current Management:</h4>
                                        <ul class="space-y-1 ml-4 text-sm">
                                            <li>• Lipitor 40mg daily (started 2017)</li>
                                            <li>• Omega-3 supplements recommended</li>
                                            <li>• Mediterranean diet adherence: moderate</li>
                                        </ul>
                                    </div>
                                    
                                    <div>
                                        <h4 class="font-medium text-gray-900 mb-2">🎬 Recommendations:</h4>
                                        <ol class="space-y-1 ml-4 text-sm list-decimal">
                                            <li>Continue current statin therapy</li>
                                            <li>Increase aerobic exercise to 150 min/week</li>
                                            <li>Add niacin supplementation for HDL improvement</li>
                                            <li>Monitor triglycerides quarterly</li>
                                            <li>Consider PCSK9 inhibitors if LDL remains elevated</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                            <time class="text-xs text-gray-500 mt-1 block">2:38 PM</time>
                        </div>
                    </div>
                    
                    <!-- Visualization Streaming Message -->
                    <div class="flex fade-in-up">
                        <div class="flex-shrink-0">
                            <div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-full flex items-center justify-center shadow-md">
                                <span class="text-lg">📊</span>
                            </div>
                        </div>
                        <div class="ml-3 flex-1 max-w-[70%]">
                            <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                                <div class="flex items-center space-x-2 mb-2">
                                    <svg class="w-4 h-4 text-purple-600 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                    </svg>
                                    <span class="text-sm font-medium text-purple-700">Visualization Agent is generating interactive charts...</span>
                                </div>
                                <div class="text-xs text-gray-600">
                                    Creating comprehensive cholesterol trend visualization with all 4 metrics
                                </div>
                            </div>
                            <time class="text-xs text-gray-500 mt-1 block">2:38 PM</time>
                        </div>
                    </div>
                    
                    <!-- Code Streaming -->
                    <div class="flex fade-in-up">
                        <div class="flex-shrink-0">
                            <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">
                                <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                                </svg>
                            </div>
                        </div>
                        <div class="ml-3 flex-1 max-w-[70%]">
                            <div class="code-artifact rounded-lg p-4 overflow-hidden">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-xs text-gray-400 font-mono">cholesterol_trends_visualization.jsx</span>
                                    <div class="flex items-center space-x-2">
                                        <span class="text-xs text-green-400">Streaming</span>
                                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                    </div>
                                </div>
                                <pre class="text-xs text-gray-300 overflow-x-auto" id="codeStream">
<code class="stream-line">const CholesterolTrendsVisualization = () => {</code>
<code class="stream-line" style="animation-delay: 0.1s">  const data = [</code>
<code class="stream-line" style="animation-delay: 0.2s">    { year: '2009', total: 274, ldl: 198, hdl: 50, triglycerides: 130 },</code>
<code class="stream-line" style="animation-delay: 0.3s">    { year: '2010', total: 280, ldl: 205, hdl: 48, triglycerides: 135 },</code>
<code class="stream-line" style="animation-delay: 0.4s">    { year: '2011', total: 268, ldl: 190, hdl: 52, triglycerides: 130 },</code>
<code class="stream-line" style="animation-delay: 0.5s">    { year: '2012', total: 265, ldl: 188, hdl: 49, triglycerides: 140 },</code>
<code class="stream-line" style="animation-delay: 0.6s">    { year: '2013', total: 260, ldl: 182, hdl: 51, triglycerides: 135 },</code>
<code class="stream-line" style="animation-delay: 0.7s">    { year: '2014', total: 255, ldl: 178, hdl: 50, triglycerides: 135 },</code>
<code class="stream-line" style="animation-delay: 0.8s">    { year: '2015', total: 248, ldl: 170, hdl: 48, triglycerides: 150 },</code>
<code class="stream-line" style="animation-delay: 0.9s">    { year: '2016', total: 245, ldl: 168, hdl: 47, triglycerides: 150 },</code>
<code class="stream-line" style="animation-delay: 1.0s">    { year: '2017', total: 240, ldl: 165, hdl: 45, triglycerides: 150 },</code>
<code class="stream-line cursor" style="animation-delay: 1.1s">    // ... more data</code>
                                </pre>
                            </div>
                            <div class="mt-2 flex items-center justify-between">
                                <time class="text-xs text-gray-500">2:38 PM</time>
                                <button class="text-xs text-blue-600 hover:text-blue-700">View in Visualizations Tab</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Input Area -->
            <div class="border-t border-gray-200 bg-white/80 backdrop-blur-sm p-4">
                <div class="max-w-2xl mx-auto">
                    <form class="flex items-end space-x-3">
                        <div class="flex-1">
                            <textarea 
                                rows="1" 
                                placeholder="Ask a follow-up question..."
                                class="w-full px-4 py-3 bg-white border border-gray-200 rounded-xl resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                            ></textarea>
                        </div>
                        <button type="submit" class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white p-3 rounded-xl transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                            </svg>
                        </button>
                    </form>
                </div>
            </div>
        </main>

        <!-- Right Panel - Visualizations Tab Active (expanded) -->
        <aside class="flex-1 bg-white/60 backdrop-blur-sm border-l border-gray-200 flex flex-col">
            <!-- Panel Header with Tabs -->
            <div class="border-b border-gray-200 bg-white/80">
                <div class="flex">
                    <button class="flex-1 px-4 py-3 text-sm font-medium text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300 transition-all duration-200">
                        <svg class="w-4 h-4 inline-block mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                        </svg>
                        Medical Team
                    </button>
                    <button class="flex-1 px-4 py-3 text-sm font-medium border-b-2 border-blue-500 text-blue-600 transition-all duration-200">
                        <svg class="w-4 h-4 inline-block mr-1.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                        Visualizations
                        <span class="tab-badge">1</span>
                    </button>
                </div>
            </div>
            
            <!-- Visualizations Content -->
            <div class="flex-1 overflow-y-auto custom-scrollbar p-4">
                <!-- Visualization Controls -->
                <div class="mb-4 flex items-center justify-between">
                    <h3 class="text-sm font-semibold text-gray-900">Query Visualizations</h3>
                    <div class="flex items-center space-x-2">
                        <button class="p-1.5 hover:bg-gray-100 rounded transition-colors">
                            <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                            </svg>
                        </button>
                        <button class="p-1.5 hover:bg-gray-100 rounded transition-colors">
                            <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <!-- Visualization Card -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                    <div class="p-4 border-b border-gray-100">
                        <div class="flex items-start justify-between">
                            <div>
                                <h4 class="text-sm font-medium text-gray-900">15-Year Cholesterol Trends</h4>
                                <p class="text-xs text-gray-500 mt-1">Interactive chart showing all cholesterol metrics from 2009-2024</p>
                            </div>
                            <span class="text-xs text-gray-400">2:38 PM</span>
                        </div>
                    </div>
                    
                    <!-- Preview/Code Toggle -->
                    <div class="flex border-b border-gray-100">
                        <button class="flex-1 px-4 py-2 text-xs font-medium text-blue-600 bg-blue-50 border-b-2 border-blue-500">
                            Preview
                        </button>
                        <button class="flex-1 px-4 py-2 text-xs font-medium text-gray-500 hover:text-gray-700">
                            Code
                        </button>
                    </div>
                    
                    <!-- Visualization Render Area -->
                    <div class="p-4 bg-gray-50" style="height: 400px;">
                        <div id="visualization-root" class="w-full h-full">
                            <!-- Chart will be rendered here -->
                            <div class="w-full h-full flex items-center justify-center">
                                <div class="text-center">
                                    <div class="w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center">
                                        <svg class="w-8 h-8 text-blue-600 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                        </svg>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-1">Rendering visualization...</p>
                                    <p class="text-xs text-gray-400">This may take a moment</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Metadata -->
                    <div class="p-3 bg-gray-50 border-t border-gray-100">
                        <div class="flex items-center justify-between text-xs text-gray-500">
                            <span>Generated by Visualization Agent</span>
                            <span>React + Recharts</span>
                        </div>
                    </div>
                </div>
                
                <!-- Additional Info -->
                <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                    <div class="flex items-start space-x-2">
                        <svg class="w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        <div class="text-xs text-blue-800">
                            <p class="font-medium mb-1">Interactive Features:</p>
                            <ul class="space-y-0.5 ml-3">
                                <li>• Hover over data points for exact values</li>
                                <li>• Click legend items to show/hide metrics</li>
                                <li>• Zoom in/out for detailed analysis</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Simulated Visualization Rendering -->
    <script type="text/babel">
        // Simulate the visualization rendering after a delay
        setTimeout(() => {
            const { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } = Recharts;
            
            const CholesterolTrendsVisualization = () => {
                const data = [
                    { year: '2009', total: 274, ldl: 198, hdl: 50, triglycerides: 130 },
                    { year: '2010', total: 280, ldl: 205, hdl: 48, triglycerides: 135 },
                    { year: '2011', total: 268, ldl: 190, hdl: 52, triglycerides: 130 },
                    { year: '2012', total: 265, ldl: 188, hdl: 49, triglycerides: 140 },
                    { year: '2013', total: 260, ldl: 182, hdl: 51, triglycerides: 135 },
                    { year: '2014', total: 255, ldl: 178, hdl: 50, triglycerides: 135 },
                    { year: '2015', total: 248, ldl: 170, hdl: 48, triglycerides: 150 },
                    { year: '2016', total: 245, ldl: 168, hdl: 47, triglycerides: 150 },
                    { year: '2017', total: 240, ldl: 165, hdl: 45, triglycerides: 150 },
                    { year: '2018', total: 235, ldl: 160, hdl: 45, triglycerides: 150 },
                    { year: '2019', total: 230, ldl: 155, hdl: 44, triglycerides: 155 },
                    { year: '2020', total: 225, ldl: 150, hdl: 43, triglycerides: 160 },
                    { year: '2021', total: 220, ldl: 148, hdl: 42, triglycerides: 150 },
                    { year: '2022', total: 215, ldl: 145, hdl: 42, triglycerides: 145 },
                    { year: '2023', total: 212, ldl: 142, hdl: 42, triglycerides: 140 },
                    { year: '2024', total: 210, ldl: 140, hdl: 42, triglycerides: 142 }
                ];
                
                return (
                    <div className="w-full h-full p-4">
                        <ResponsiveContainer width="100%" height="100%">
                            <LineChart data={data} margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>
                                <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                                <XAxis dataKey="year" tick={{ fontSize: 12 }} />
                                <YAxis tick={{ fontSize: 12 }} label={{ value: 'mg/dL', angle: -90, position: 'insideLeft' }} />
                                <Tooltip 
                                    contentStyle={{ backgroundColor: 'rgba(255, 255, 255, 0.95)', border: '1px solid #e5e7eb' }}
                                    labelStyle={{ fontWeight: 'bold' }}
                                />
                                <Legend wrapperStyle={{ fontSize: '12px' }} />
                                <Line 
                                    type="monotone" 
                                    dataKey="total" 
                                    stroke="#3b82f6" 
                                    strokeWidth={2}
                                    name="Total Cholesterol"
                                    dot={{ r: 4 }}
                                    activeDot={{ r: 6 }}
                                />
                                <Line 
                                    type="monotone" 
                                    dataKey="ldl" 
                                    stroke="#ef4444" 
                                    strokeWidth={2}
                                    name="LDL (Bad)"
                                    dot={{ r: 4 }}
                                    activeDot={{ r: 6 }}
                                />
                                <Line 
                                    type="monotone" 
                                    dataKey="hdl" 
                                    stroke="#10b981" 
                                    strokeWidth={2}
                                    name="HDL (Good)"
                                    dot={{ r: 4 }}
                                    activeDot={{ r: 6 }}
                                />
                                <Line 
                                    type="monotone" 
                                    dataKey="triglycerides" 
                                    stroke="#f59e0b" 
                                    strokeWidth={2}
                                    name="Triglycerides"
                                    dot={{ r: 4 }}
                                    activeDot={{ r: 6 }}
                                />
                            </LineChart>
                        </ResponsiveContainer>
                    </div>
                );
            };
            
            const root = ReactDOM.createRoot(document.getElementById('visualization-root'));
            root.render(React.createElement(CholesterolTrendsVisualization));
        }, 3000);
        
        // Simulate code streaming completion
        setTimeout(() => {
            const codeStream = document.getElementById('codeStream');
            const additionalCode = `
  ];

  return (
    <div className="w-full h-full p-4">
      <ResponsiveContainer width="100%" height="100%">
        <LineChart data={data} margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>
          <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
          <XAxis dataKey="year" tick={{ fontSize: 12 }} />
          <YAxis tick={{ fontSize: 12 }} label={{ value: 'mg/dL', angle: -90, position: 'insideLeft' }} />
          <Tooltip 
            contentStyle={{ backgroundColor: 'rgba(255, 255, 255, 0.95)', border: '1px solid #e5e7eb' }}
            labelStyle={{ fontWeight: 'bold' }}
          />
          <Legend wrapperStyle={{ fontSize: '12px' }} />
          <Line type="monotone" dataKey="total" stroke="#3b82f6" strokeWidth={2} name="Total Cholesterol" />
          <Line type="monotone" dataKey="ldl" stroke="#ef4444" strokeWidth={2} name="LDL (Bad)" />
          <Line type="monotone" dataKey="hdl" stroke="#10b981" strokeWidth={2} name="HDL (Good)" />
          <Line type="monotone" dataKey="triglycerides" stroke="#f59e0b" strokeWidth={2} name="Triglycerides" />
        </LineChart>
      </ResponsiveContainer>
    </div>
  );
};`;
            
            const lines = additionalCode.trim().split('\n');
            lines.forEach((line, index) => {
                setTimeout(() => {
                    const codeElement = document.createElement('code');
                    codeElement.className = 'stream-line';
                    codeElement.textContent = line;
                    codeStream.appendChild(codeElement);
                    codeStream.appendChild(document.createTextNode('\n'));
                }, index * 100);
            });
        }, 1500);
    </script>
</body>
</html>